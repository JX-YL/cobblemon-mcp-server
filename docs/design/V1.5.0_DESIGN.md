# v1.5.0 è®¾è®¡æ–‡æ¡£ - æ€§åˆ«/æ€§æ ¼/ç”Ÿç‰©ç¾¤ç³»è¿›åŒ–

**ç‰ˆæœ¬å·**: v1.5.0  
**å¼€å‘æ—¶é—´**: 2025-10-24  
**ä¸»é¢˜**: æ€§åˆ«ä¸æ€§æ ¼è¿›åŒ–ã€ç”Ÿç‰©ç¾¤ç³»è¿›åŒ–

---

## ğŸ“‹ ç‰ˆæœ¬ç›®æ ‡

åŸºäºå‚è€ƒåŒ…çš„è¦†ç›–ç‡æŠ¥å‘Šï¼Œv1.5.0 å°†å®ç°ä»¥ä¸‹é«˜çº§è¿›åŒ–æœºåˆ¶ï¼š

1. âœ… **properties (gender)** - æ€§åˆ«æ¡ä»¶è¿›åŒ–
2. âœ… **properties (nature)** - æ€§æ ¼æ¡ä»¶è¿›åŒ–  
3. âœ… **biome** - ç”Ÿç‰©ç¾¤ç³»æ¡ä»¶è¿›åŒ–
4. âœ… **damage_taken** - ä¼¤å®³æ¡ä»¶è¿›åŒ–

---

## ğŸ¯ å‚è€ƒåŒ…åˆ†æ

### å·²å®ç°çš„è¿›åŒ–æœºåˆ¶ï¼ˆè¦†ç›–ç‡ 97%ï¼‰

å‚è€ƒåŒ… Instance Package å®ç°äº† **10 ç§è¿›åŒ–æœºåˆ¶**ï¼š

| è¿›åŒ–æœºåˆ¶ | MCPæ”¯æŒçŠ¶æ€ | å‚è€ƒç¤ºä¾‹ |
|---------|------------|---------|
| level_up | âœ… v1.3.0 | Machop â†’ Machoke |
| item_interact | âœ… v1.3.0 | Eevee â†’ Flareon (fire_stone) |
| trade | âœ… v1.3.0 | Machoke â†’ Machamp |
| friendship | âœ… v1.3.0 | Pichu â†’ Pikachu |
| time_range | âœ… v1.3.0 | Rockruff (day/night/dusk) |
| has_move_type | âœ… v1.3.0 | Eevee â†’ Sylveon (fairy move) |
| **properties (gender)** | âŒ **v1.5.0æ–°å¢** | **Salandit â†’ Salazzle (female only)** |
| **properties (nature)** | âŒ **v1.5.0æ–°å¢** | **Toxel â†’ Toxtricity (25 natures)** |
| **biome** | âŒ **v1.5.0æ–°å¢** | **Petilil â†’ Lilligant (regional)** |
| **damage_taken** | âŒ **v1.5.0æ–°å¢** | **Yamask-Galar â†’ Runerigus (49 damage)** |

---

## ğŸ” å®˜æ–¹æ ¼å¼åˆ†æ

### 1. properties (gender) - æ€§åˆ«æ¡ä»¶

**ç¤ºä¾‹ï¼šSalandit (#757) - åªæœ‰é›Œæ€§å¯ä»¥è¿›åŒ–**

```json
{
  "id": "salandit_salazzle",
  "variant": "level_up",
  "result": "salazzle",
  "consumeHeldItem": false,
  "learnableMoves": ["captivate", "firelash"],
  "requirements": [
    {
      "variant": "level",
      "minLevel": 33
    },
    {
      "variant": "properties",
      "target": "gender=female"
    }
  ]
}
```

**å…³é”®å­—æ®µ**ï¼š
- `variant`: "properties"
- `target`: "gender=female" æˆ– "gender=male"

---

### 2. properties (nature) - æ€§æ ¼æ¡ä»¶

**ç¤ºä¾‹ï¼šToxel (#848) - 25ç§æ€§æ ¼å¯¹åº”2ç§å½¢æ€**

```json
{
  "id": "toxelhardy_toxtricity",
  "variant": "level_up",
  "result": "toxtricity punk_form=amped",  // é«˜è°ƒå½¢æ€
  "requirements": [
    {
      "variant": "level",
      "minLevel": 30
    },
    {
      "variant": "properties",
      "target": "toxel nature=hardy"  // æŒ‡å®šæ€§æ ¼
    }
  ]
}
```

**æ€§æ ¼åˆ†ç±»**ï¼ˆToxelæ¡ˆä¾‹ï¼‰ï¼š

**Amped Formï¼ˆé«˜è°ƒï¼‰**ï¼š13ç§æ€§æ ¼
```
hardy, brave, adamant, naughty, docile, impish, lax, 
hasty, jolly, naive, rash, sassy, quirky
```

**Low Key Formï¼ˆä½è°ƒï¼‰**ï¼š12ç§æ€§æ ¼
```
lonely, bold, relaxed, timid, serious, modest, mild, 
quiet, bashful, calm, gentle, careful
```

**å…³é”®å­—æ®µ**ï¼š
- `variant`: "properties"
- `target`: "pokemonname nature=naturename" æ ¼å¼

---

### 3. biome - ç”Ÿç‰©ç¾¤ç³»æ¡ä»¶

**ç¤ºä¾‹ï¼šPetilil (#548) - åœ°åŒºå½¢æ€è¿›åŒ–**

```json
{
  "id": "petilil_lilliganthisui",
  "variant": "item_interact",
  "result": "lilligant hisuian",
  "requiredContext": "cobblemon:sun_stone",
  "requirements": [
    {
      "variant": "biome",
      "biomeCondition": "#cobblemon:evolution/regional/petilil_hisuibiome"
    }
  ]
}
```

**å…³é”®å­—æ®µ**ï¼š
- `variant`: "biome"
- `biomeCondition`: ç”Ÿç‰©ç¾¤ç³»æ ‡ç­¾ï¼ˆä»¥ `#cobblemon:` å¼€å¤´ï¼‰

**å¸¸è§ç”Ÿç‰©ç¾¤ç³»æ¡ä»¶**ï¼š
```
#cobblemon:evolution/regional/petilil_hisuibiome    # æ´—ç¿ åœ°åŒº
#cobblemon:evolution/regional/petilil_unovabiome    # åˆä¼—åœ°åŒº
#cobblemon:is_sandy                                 # æ²™æ¼ 
#cobblemon:is_snowy                                 # é›ªåœ°
#cobblemon:is_ocean                                 # æµ·æ´‹
```

---

### 4. damage_taken - ä¼¤å®³æ¡ä»¶

**ç¤ºä¾‹ï¼šYamask-Galar (#562) - å—åˆ°ä¼¤å®³åè¿›åŒ–**

```json
{
  "id": "yamask_runerigus",
  "variant": "level_up",
  "result": "runerigus",
  "requirements": [
    {
      "variant": "level",
      "minLevel": 0  // ä»»æ„ç­‰çº§
    },
    {
      "variant": "damage_taken",
      "amount": 49  // å—åˆ°49ç‚¹ä¼¤å®³
    },
    {
      "variant": "biome",
      "biomeCondition": "#cobblemon:is_sandy"  // åœ¨æ²™æ¼ ä¸­
    }
  ]
}
```

**å…³é”®å­—æ®µ**ï¼š
- `variant`: "damage_taken"
- `amount`: ä¼¤å®³å€¼ï¼ˆæ•´æ•°ï¼‰

---

## ğŸ› ï¸ å®ç°æ–¹æ¡ˆ

### 1. éªŒè¯å™¨æ‰©å±•

#### æ–°å¢æ–‡ä»¶ï¼š`tools/validators/properties_validator.py`

```python
class PropertiesValidator:
    """éªŒè¯ properties æ¡ä»¶ï¼ˆæ€§åˆ«ã€æ€§æ ¼ç­‰ï¼‰"""
    
    SUPPORTED_GENDERS = ["male", "female"]
    
    SUPPORTED_NATURES = [
        "hardy", "lonely", "brave", "adamant", "naughty",
        "bold", "docile", "relaxed", "impish", "lax",
        "timid", "hasty", "serious", "jolly", "naive",
        "modest", "mild", "quiet", "bashful", "rash",
        "calm", "gentle", "sassy", "careful", "quirky"
    ]
    
    @staticmethod
    def validate_gender_condition(target: str):
        """éªŒè¯æ€§åˆ«æ¡ä»¶"""
        if not target.startswith("gender="):
            return False, "æ€§åˆ«æ¡ä»¶å¿…é¡»ä»¥ 'gender=' å¼€å¤´"
        
        gender = target.split("=")[1]
        if gender not in PropertiesValidator.SUPPORTED_GENDERS:
            return False, f"ä¸æ”¯æŒçš„æ€§åˆ«: {gender}"
        
        return True, None
    
    @staticmethod
    def validate_nature_condition(target: str):
        """éªŒè¯æ€§æ ¼æ¡ä»¶"""
        if " nature=" not in target:
            return False, "æ€§æ ¼æ¡ä»¶å¿…é¡»åŒ…å« ' nature='"
        
        parts = target.split(" nature=")
        if len(parts) != 2:
            return False, "æ€§æ ¼æ¡ä»¶æ ¼å¼é”™è¯¯"
        
        pokemon_name, nature = parts
        if nature not in PropertiesValidator.SUPPORTED_NATURES:
            return False, f"ä¸æ”¯æŒçš„æ€§æ ¼: {nature}"
        
        return True, None
```

#### æ–°å¢æ–‡ä»¶ï¼š`tools/validators/biome_validator.py`

```python
class BiomeValidator:
    """éªŒè¯ç”Ÿç‰©ç¾¤ç³»æ¡ä»¶"""
    
    COMMON_BIOMES = [
        "#cobblemon:is_sandy",
        "#cobblemon:is_snowy",
        "#cobblemon:is_ocean",
        "#cobblemon:is_forest",
        "#cobblemon:is_mountain",
        "#cobblemon:is_plains",
        "#cobblemon:evolution/regional/petilil_hisuibiome",
        "#cobblemon:evolution/regional/petilil_unovabiome"
    ]
    
    @staticmethod
    def validate_biome_condition(biome_condition: str):
        """éªŒè¯ç”Ÿç‰©ç¾¤ç³»æ¡ä»¶"""
        if not biome_condition.startswith("#"):
            return False, "ç”Ÿç‰©ç¾¤ç³»æ ‡ç­¾å¿…é¡»ä»¥ '#' å¼€å¤´"
        
        if not biome_condition.startswith("#cobblemon:"):
            return False, "ç”Ÿç‰©ç¾¤ç³»æ ‡ç­¾å¿…é¡»ä»¥ '#cobblemon:' å¼€å¤´"
        
        return True, None
```

#### æ–°å¢æ–‡ä»¶ï¼š`tools/validators/damage_validator.py`

```python
class DamageValidator:
    """éªŒè¯ä¼¤å®³æ¡ä»¶"""
    
    @staticmethod
    def validate_damage_amount(amount: int):
        """éªŒè¯ä¼¤å®³å€¼"""
        if not isinstance(amount, int):
            return False, "ä¼¤å®³å€¼å¿…é¡»æ˜¯æ•´æ•°"
        
        if amount <= 0:
            return False, "ä¼¤å®³å€¼å¿…é¡»å¤§äº0"
        
        if amount > 1000:
            return False, "ä¼¤å®³å€¼ä¸èƒ½è¶…è¿‡1000"
        
        return True, None
```

---

### 2. server.py åŠŸèƒ½æ‰©å±•

#### æ–°å¢å‚æ•°ï¼ˆcreate_pokemon_with_statsï¼‰

```python
@mcp.tool()
async def create_pokemon_with_stats(
    # ... ç°æœ‰å‚æ•° ...
    
    # v1.5.0: æ€§åˆ«ä¸æ€§æ ¼è¿›åŒ–
    evolution_gender: str = None,          # æ€§åˆ«æ¡ä»¶: "male" æˆ– "female"
    evolution_nature: str = None,          # æ€§æ ¼æ¡ä»¶: "hardy", "brave" ç­‰
    
    # v1.5.0: ç”Ÿç‰©ç¾¤ç³»è¿›åŒ–
    evolution_biome: str = None,           # ç”Ÿç‰©ç¾¤ç³»: "#cobblemon:is_sandy" ç­‰
    
    # v1.5.0: ä¼¤å®³æ¡ä»¶è¿›åŒ–
    evolution_damage_amount: int = None,   # ä¼¤å®³å€¼: 49 ç­‰
    
) -> dict:
    """åˆ›å»ºå®å¯æ¢¦é…ç½®ï¼ˆv1.5.0 - æ”¯æŒæ€§åˆ«/æ€§æ ¼/ç”Ÿç‰©ç¾¤ç³»/ä¼¤å®³è¿›åŒ–ï¼‰"""
```

#### è¿›åŒ–æ„å»ºé€»è¾‘æ›´æ–°

```python
# v1.5.0: æ€§åˆ«æ¡ä»¶
if evolution_gender:
    valid, error = PropertiesValidator.validate_gender_condition(f"gender={evolution_gender}")
    if not valid:
        raise ValueError(f"æ€§åˆ«æ¡ä»¶æ— æ•ˆ: {error}")
    
    requirements.append({
        "variant": "properties",
        "target": f"gender={evolution_gender}"
    })

# v1.5.0: æ€§æ ¼æ¡ä»¶
if evolution_nature:
    target = f"{name.lower()} nature={evolution_nature}"
    valid, error = PropertiesValidator.validate_nature_condition(target)
    if not valid:
        raise ValueError(f"æ€§æ ¼æ¡ä»¶æ— æ•ˆ: {error}")
    
    requirements.append({
        "variant": "properties",
        "target": target
    })

# v1.5.0: ç”Ÿç‰©ç¾¤ç³»æ¡ä»¶
if evolution_biome:
    valid, error = BiomeValidator.validate_biome_condition(evolution_biome)
    if not valid:
        raise ValueError(f"ç”Ÿç‰©ç¾¤ç³»æ¡ä»¶æ— æ•ˆ: {error}")
    
    requirements.append({
        "variant": "biome",
        "biomeCondition": evolution_biome
    })

# v1.5.0: ä¼¤å®³æ¡ä»¶
if evolution_damage_amount:
    valid, error = DamageValidator.validate_damage_amount(evolution_damage_amount)
    if not valid:
        raise ValueError(f"ä¼¤å®³æ¡ä»¶æ— æ•ˆ: {error}")
    
    requirements.append({
        "variant": "damage_taken",
        "amount": evolution_damage_amount
    })
```

---

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1: æ€§åˆ«æ¡ä»¶è¿›åŒ–ï¼ˆSalanditï¼‰

```python
# ç„°åèœ¥ - åªæœ‰é›Œæ€§å¯ä»¥è¿›åŒ–
await create_complete_package(
    name="Salandit",
    dex=757,
    primary_type="poison",
    secondary_type="fire",
    male_ratio=0.875,  # 87.5% é›„æ€§ï¼ˆå¾ˆå¤šé›„æ€§æ— æ³•è¿›åŒ–ï¼‰
    hp=48, attack=44, defence=40,
    special_attack=71, special_defence=40, speed=77,
    
    # v1.5.0: æ€§åˆ«æ¡ä»¶è¿›åŒ–
    evolution_target="Salazzle",
    evolution_variant="level_up",
    evolution_level=33,
    evolution_gender="female"  # âœ¨ åªæœ‰é›Œæ€§å¯ä»¥è¿›åŒ–
)
```

### ç¤ºä¾‹ 2: æ€§æ ¼æ¡ä»¶è¿›åŒ–ï¼ˆToxelï¼‰

```python
# æ¯’ç”µå©´ - é«˜è°ƒå½¢æ€ï¼ˆHardyæ€§æ ¼ï¼‰
await create_complete_package(
    name="Toxel",
    dex=848,
    primary_type="electric",
    secondary_type="poison",
    hp=40, attack=38, defence=35,
    special_attack=54, special_defence=35, speed=40,
    
    # v1.5.0: æ€§æ ¼æ¡ä»¶è¿›åŒ–
    evolution_target="Toxtricity",
    evolution_variant="level_up",
    evolution_level=30,
    evolution_nature="hardy"  # âœ¨ Hardyæ€§æ ¼ â†’ é«˜è°ƒå½¢æ€
)
```

### ç¤ºä¾‹ 3: ç”Ÿç‰©ç¾¤ç³»æ¡ä»¶è¿›åŒ–ï¼ˆPetililï¼‰

```python
# èŠ±è““è““ - æ´—ç¿ å½¢æ€
await create_complete_package(
    name="Petilil",
    dex=548,
    primary_type="grass",
    male_ratio=0.0,  # 100% é›Œæ€§
    hp=45, attack=35, defence=50,
    special_attack=70, special_defence=50, speed=30,
    
    # v1.5.0: ç”Ÿç‰©ç¾¤ç³»æ¡ä»¶è¿›åŒ–
    evolution_target="Lilligant",
    evolution_variant="item_interact",
    evolution_item="cobblemon:sun_stone",
    evolution_biome="#cobblemon:evolution/regional/petilil_hisuibiome"  # âœ¨ æ´—ç¿ åœ°åŒº
)
```

### ç¤ºä¾‹ 4: ä¼¤å®³æ¡ä»¶è¿›åŒ–ï¼ˆYamask-Galarï¼‰

```python
# å“­å“­é¢å…·ï¼ˆä¼½å‹’å°”ï¼‰ - å—ä¼¤åè¿›åŒ–
await create_complete_package(
    name="Yamask",
    dex=562,
    primary_type="ground",
    secondary_type="ghost",
    hp=38, attack=55, defence=85,
    special_attack=30, special_defence=65, speed=30,
    
    # v1.5.0: ä¼¤å®³ + ç”Ÿç‰©ç¾¤ç³»å¤åˆæ¡ä»¶
    evolution_target="Runerigus",
    evolution_variant="level_up",
    evolution_level=0,  # ä»»æ„ç­‰çº§
    evolution_damage_amount=49,  # âœ¨ å—åˆ°49ç‚¹ä¼¤å®³
    evolution_biome="#cobblemon:is_sandy"  # âœ¨ åœ¨æ²™æ¼ ä¸­
)
```

---

## ğŸ® æµ‹è¯•è®¡åˆ’

### æµ‹è¯•åŒ…ç”Ÿæˆ

åˆ›å»ºä»¥ä¸‹æµ‹è¯•åŒ…ï¼š

1. **Salandit â†’ Salazzle** - æ€§åˆ«æ¡ä»¶
2. **Toxel â†’ Toxtricity** - æ€§æ ¼æ¡ä»¶ï¼ˆ2ç§å½¢æ€ï¼‰
3. **Petilil â†’ Lilligant** - ç”Ÿç‰©ç¾¤ç³»æ¡ä»¶ï¼ˆ2ç§å½¢æ€ï¼‰
4. **Yamask â†’ Runerigus** - ä¼¤å®³ + ç”Ÿç‰©ç¾¤ç³»å¤åˆæ¡ä»¶

### éªŒè¯æ¸…å•

- [ ] æ€§åˆ«æ¡ä»¶æ­£ç¡®éªŒè¯
- [ ] æ€§æ ¼æ¡ä»¶æ”¯æŒ25ç§æ€§æ ¼
- [ ] ç”Ÿç‰©ç¾¤ç³»æ ‡ç­¾æ ¼å¼æ­£ç¡®
- [ ] ä¼¤å®³å€¼åˆç†èŒƒå›´
- [ ] å¤åˆæ¡ä»¶æ­£ç¡®ç»„åˆ
- [ ] JSONæ ¼å¼ç¬¦åˆå®˜æ–¹è§„èŒƒ

---

## ğŸ“Š è¦†ç›–ç‡æå‡

| ç‰ˆæœ¬ | è¦†ç›–ç‡ | æ–°å¢åŠŸèƒ½ |
|------|-------|---------|
| v1.3.0 | 60% | åŸºç¡€è¿›åŒ–ï¼ˆlevel_up, item_interact, trade, friendship, time_range, has_move_typeï¼‰ |
| v1.4.1 | 65% | åŸºç¡€å­—æ®µæ‰©å±•ï¼ˆåŒå±æ€§ã€æ€§åˆ«æ¯”ä¾‹ã€åŠªåŠ›å€¼ç­‰ï¼‰|
| **v1.5.0** | **85%** | **æ€§åˆ«/æ€§æ ¼/ç”Ÿç‰©ç¾¤ç³»/ä¼¤å®³è¿›åŒ–** |

**æ–°å¢è¦†ç›–**ï¼š
- âœ… properties (gender)
- âœ… properties (nature)
- âœ… biome
- âœ… damage_taken

---

## ğŸ”„ ç‰ˆæœ¬å…¼å®¹æ€§

### å‘åå…¼å®¹
- âœ… å®Œå…¨å…¼å®¹ v1.4.1 åŠä¹‹å‰ç‰ˆæœ¬
- âœ… æ‰€æœ‰ç°æœ‰åŠŸèƒ½ä¿æŒä¸å˜
- âœ… æ–°å‚æ•°ä¸ºå¯é€‰å‚æ•°

### Cobblemon å…¼å®¹
- âœ… Cobblemon 1.5.0+
- âœ… Minecraft 1.20.1+

---

## ğŸ“š æ–‡æ¡£æ›´æ–°

éœ€è¦æ›´æ–°çš„æ–‡æ¡£ï¼š
1. `README.md` - æ·»åŠ  v1.5.0 åŠŸèƒ½è¯´æ˜
2. `CHANGELOG.md` - è®°å½• v1.5.0 æ›´æ–°
3. `docs/examples/` - æ·»åŠ  v1.5.0 ç¤ºä¾‹è„šæœ¬

---

## ğŸ¯ å¼€å‘é‡Œç¨‹ç¢‘

- [x] éœ€æ±‚åˆ†æï¼ˆå‚è€ƒåŒ…åˆ†æï¼‰
- [ ] éªŒè¯å™¨å®ç°ï¼ˆPropertiesValidator, BiomeValidator, DamageValidatorï¼‰
- [ ] server.py åŠŸèƒ½æ‰©å±•
- [ ] EvolutionValidator æ›´æ–°
- [ ] æµ‹è¯•åŒ…ç”Ÿæˆ
- [ ] æ–‡æ¡£æ›´æ–°
- [ ] å‘å¸ƒ v1.5.0

---

**è®¾è®¡å®Œæˆæ—¥æœŸ**: 2025-10-24  
**é¢„è®¡å‘å¸ƒæ—¥æœŸ**: 2025-10-24

